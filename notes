from pymongo import MongoClient
from urllib.parse import quote_plus

# Raw credentials
username = "your_username"
password = "your_password_with_special@characters"

# Encode the username and password safely
escaped_username = quote_plus(username)
escaped_password = quote_plus(password)

# MongoDB connection parts
host = "host"
port = "port"
database_name = "your_database_name"

# Final MongoDB URL
mongo_url = f"mongodb://{escaped_username}:{escaped_password}@{host}:{port}/{database_name}"

try:
    client = MongoClient(mongo_url)
    print("Connected to MongoDB")
    print("Databases available:", client.list_database_names())

except Exception as e:
    print(f"Error while connecting to MongoDB: {e}")

finally:
    if 'client' in locals():
        client.close()
        print("MongoDB connection closed.")
