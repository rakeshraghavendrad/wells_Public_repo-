from pymongo import MongoClient

# Replace with your actual MongoDB connection URL
mongo_url = "mongodb://username:password@host:port/database_name"

try:
    # Create a MongoDB client
    client = MongoClient(mongo_url)

    # Print the list of databases to confirm connection
    print("Connected to MongoDB")
    print("Databases available:", client.list_database_names())

except Exception as e:
    print(f"Error while connecting to MongoDB: {e}")

finally:
    # Check if client exists before closing
    try:
        if 'client' in locals():
            client.close()
            print("MongoDB connection closed.")
    except Exception as e:
        print(f"Error while closing MongoDB connection: {e}")
